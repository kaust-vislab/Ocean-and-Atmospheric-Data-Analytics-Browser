var selected_thumbnails,selected_categories;function updateUI(){updateThumbnails();updateSidebar();updateDynamicComponents()}function updateSelectedCategories(){for(var c in categories)for(var a in categories[c].categories){var b=categories[c].categories[a];selected_categories[c][b.name]=b.button.hasClass("category-icon-selected")}}
function updateThumbnails(){var c=new RegExp(search_text,"i");selected_thumbnails=thumbnails.filter(function(a){var b=!search_text||0==search_text.length||a.metadata.match(c);a=a.pub_year<=max_filter_year&&a.pub_year>=min_filter_year;return b&&a});selected_thumbnails.sort(function(a,b){return a.pub_year!=b.pub_year?b.pub_year-a.pub_year:b.title.localeCompare(a.title)});$("#thumbnails-container").empty().append(selected_thumbnails)}
function updateSidebar(){for(var c in annual_totals)annual_totals[c].current=0;for(var a in thumbnails)-1!=selected_thumbnails.indexOf(thumbnails[a])&&annual_totals[thumbnails[a].pub_year].current++;d3.entries(annual_totals);g.selectAll(".bar-current").transition().duration(200).attr("x",function(a){return x(a.key)}).attr("y",function(a){return y(a.value.current)}).attr("width",x.bandwidth()).attr("height",function(a){return hist_height-y(a.value.current)});$("#side-histogram-label > .pull-left > strong").text(min_filter_year);
$("#side-histogram-label > .pull-right > strong").text(max_filter_year);$("#side-total").text(selected_thumbnails.length);$('[data-tooltip="tooltip"]').tooltip();$('[rel="tooltip"]').tooltip({html:!0})}function updateDynamicComponents(){$("#side-topic-filter").outerHeight(Math.max($("#content").outerHeight(!0)-$("#side-static-top").outerHeight(!0)-$("#side-topic-filter-header").outerHeight(!0)-20,200))}setup(updateUI);